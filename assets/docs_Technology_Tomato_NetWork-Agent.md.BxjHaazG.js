import{_ as a,c as i,a2 as t,o as n}from"./chunks/framework.DPuwY6B9.js";const c=JSON.parse('{"title":"NetWork-Agent","description":"","frontmatter":{},"headers":[],"relativePath":"docs/Technology/Tomato/NetWork-Agent.md","filePath":"docs/Technology/Tomato/NetWork-Agent.md","lastUpdated":1722607610000}'),e={name:"docs/Technology/Tomato/NetWork-Agent.md"};function h(l,s,p,k,r,d){return n(),i("div",null,s[0]||(s[0]=[t(`<h1 id="network-agent" tabindex="-1">NetWork-Agent <a class="header-anchor" href="#network-agent" aria-label="Permalink to &quot;NetWork-Agent&quot;">​</a></h1><hr><h2 id="网站" tabindex="-1">网站 <a class="header-anchor" href="#网站" aria-label="Permalink to &quot;网站&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">服务器推荐</p><p><a href="https://www.vpsoff.net/" target="_blank" rel="noreferrer">vps服务器推荐网站</a></p></div><div class="tip custom-block"><p class="custom-block-title">中转</p><p><a href="https://www.shuscloud.com" target="_blank" rel="noreferrer">书生</a></p><p><a href="https://hmbcloud.com/" target="_blank" rel="noreferrer">半月湾</a></p></div><p>开源版本: 咸蛋面板 、极光面板</p><h2 id="vpn" tabindex="-1">VPN <a class="header-anchor" href="#vpn" aria-label="Permalink to &quot;VPN&quot;">​</a></h2><h3 id="搭建x-ui" tabindex="-1">搭建X-UI <a class="header-anchor" href="#搭建x-ui" aria-label="Permalink to &quot;搭建X-UI&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -itd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network=host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PWD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/db/:/etc/x-ui/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PWD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/cert/:/root/cert/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x-ui</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=unless-stopped</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    enwaiax/x-ui:latest</span></span></code></pre></div><h3 id="安装bbr" tabindex="-1">安装BBR <a class="header-anchor" href="#安装bbr" aria-label="Permalink to &quot;安装BBR&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://github.com/chiakge/Linux-NetSpeed/raw/master/tcp.sh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./tcp.sh</span></span></code></pre></div><h3 id="搭建v2board" tabindex="-1">搭建v2board <a class="header-anchor" href="#搭建v2board" aria-label="Permalink to &quot;搭建v2board&quot;">​</a></h3><h4 id="docker搭建" tabindex="-1">docker搭建 <a class="header-anchor" href="#docker搭建" aria-label="Permalink to &quot;docker搭建&quot;">​</a></h4><p>docker搭建: <a href="https://github.com/GZ1903/docker_v2board" target="_blank" rel="noreferrer">GitHub</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--name=v2board </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--restart </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/root/v2board/nginx:/usr/share/nginx/html/v2board</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/root/v2board/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">80:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">443:443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gz1903/v2board:1.6.0</span></span></code></pre></div><table tabindex="0"><thead><tr><th>MySQL_Default_USER</th><th>ROOT</th></tr></thead><tbody><tr><td>MySQL_Default_PASS</td><td><a href="mailto:v2board@qq.com" target="_blank" rel="noreferrer">v2board@qq.com</a></td></tr></tbody></table><table tabindex="0"><thead><tr><th>V2Board_Admin_USER</th><th><a href="mailto:v2board@qq.com" target="_blank" rel="noreferrer">v2board@qq.com</a></th></tr></thead><tbody><tr><td>V2Board_Admin_PASS</td><td><a href="mailto:v2board@qq.com" target="_blank" rel="noreferrer">v2board@qq.com</a></td></tr></tbody></table><h5 id="版本升级" tabindex="-1">版本升级 <a class="header-anchor" href="#版本升级" aria-label="Permalink to &quot;版本升级&quot;">​</a></h5><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Interact</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v2board</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Get the new version of v2board</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/v2board/v2board.git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/nginx/html/v2board/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Install</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/nginx/html/v2board</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/nginx/html/v2board/init.sh</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#mysqlpass =&gt; v2board@qq.com </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Give v2board permission</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/nginx/html/v2board</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Restart queue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">supervisorctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v2board</span></span></code></pre></div><h4 id="dockercompose搭建" tabindex="-1">DockerCompose搭建 <a class="header-anchor" href="#dockercompose搭建" aria-label="Permalink to &quot;DockerCompose搭建&quot;">​</a></h4><h5 id="使用-docker-安装-v2board" tabindex="-1">使用 Docker 安装 V2Board <a class="header-anchor" href="#使用-docker-安装-v2board" aria-label="Permalink to &quot;使用 Docker 安装 V2Board&quot;">​</a></h5><h5 id="安装-docker" tabindex="-1">安装 Docker <a class="header-anchor" href="#安装-docker" aria-label="Permalink to &quot;安装 Docker&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>curl -fsSL https://get.docker.com | bash</span></span>
<span class="line"><span>curl -L &quot;https://github.com/docker/compose/releases/download/1.25.3/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span></span>
<span class="line"><span>chmod a+x /usr/local/bin/docker-compose</span></span>
<span class="line"><span># 创建个软链接，以后用 dc 命令来代替 docker-compose</span></span>
<span class="line"><span>rm -rf which dc  # 若系统中存在 dc 则删除，这个 dc 就是个计算器，完全没有用</span></span>
<span class="line"><span>ln -s /usr/local/bin/docker-compose /usr/bin/dc</span></span></code></pre></div><h5 id="克隆代码" tabindex="-1">克隆代码 <a class="header-anchor" href="#克隆代码" aria-label="Permalink to &quot;克隆代码&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git clone https://github.com/v2board/v2board-docker.git</span></span>
<span class="line"><span>cd v2board-docker/</span></span>
<span class="line"><span>git submodule update --init</span></span>
<span class="line"><span>echo &#39;  branch = master&#39; &gt;&gt; .gitmodules</span></span>
<span class="line"><span>git submodule update --remote</span></span></code></pre></div><p>修改&#39;caddy.conf&#39; 第一行&#39;<a href="http://xn--6qqv7i2xdt95b" target="_blank" rel="noreferrer">http://你的域名</a> {&#39;</p><p>tls /path/to/ssl.crt /pass/to/ssl.key</p><h5 id="启动环境" tabindex="-1">启动环境 <a class="header-anchor" href="#启动环境" aria-label="Permalink to &quot;启动环境&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>dc up -d</span></span></code></pre></div><h5 id="安装配置-v2board" tabindex="-1">安装配置 V2Board <a class="header-anchor" href="#安装配置-v2board" aria-label="Permalink to &quot;安装配置 V2Board&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>dc exec www bash</span></span>
<span class="line"><span>bash-5.0# wget https://getcomposer.org/download/2.5.1/composer.phar</span></span>
<span class="line"><span>bash-5.0# php composer.phar install</span></span>
<span class="line"><span>bash-5.0# php artisan v2board:install</span></span>
<span class="line"><span>数据库地址： mysql</span></span>
<span class="line"><span>数据库名：v2board</span></span>
<span class="line"><span>数据库用户名：root</span></span>
<span class="line"><span>数据库密码：v2boardisbest</span></span></code></pre></div><h5 id="启动horizon" tabindex="-1">启动horizon <a class="header-anchor" href="#启动horizon" aria-label="Permalink to &quot;启动horizon&quot;">​</a></h5><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash-5.1\\#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre></div><h4 id="手动" tabindex="-1">手动 <a class="header-anchor" href="#手动" aria-label="Permalink to &quot;手动&quot;">​</a></h4><p>官方搭建手册：<a href="https://docs.v2board.com/deploy/aapanel.html" target="_blank" rel="noreferrer"> V2Board 使用手册</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/GZ1903/docker_v2board.git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src/docker_v2board</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src/docker_v2board</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker_v2board.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./docker_v2board.sh</span></span></code></pre></div><h4 id="后端对接" tabindex="-1">后端对接 <a class="header-anchor" href="#后端对接" aria-label="Permalink to &quot;后端对接&quot;">​</a></h4><p>参考： <a href="https://xrayr-project.github.io/XrayR-doc/xrayr-xia-zai-he-an-zhuang/install/docker.html" target="_blank" rel="noreferrer">使用docker安装 · GitBook (xrayr-project.github.io)</a></p><h3 id="docker-compose-安装xrayr-推荐" tabindex="-1">Docker-compose 安装XrayR (推荐) <a class="header-anchor" href="#docker-compose-安装xrayr-推荐" aria-label="Permalink to &quot;Docker-compose 安装XrayR (推荐)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/XrayR-project/XrayR-release</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> XrayR-release</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><h3 id="搭建telegram代理" tabindex="-1">搭建Telegram代理 <a class="header-anchor" href="#搭建telegram代理" aria-label="Permalink to &quot;搭建Telegram代理&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1111:1111</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;USERS=cloud:112233&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> egregors/socks5-server</span></span></code></pre></div><h3 id="部署warp" tabindex="-1">部署warp <a class="header-anchor" href="#部署warp" aria-label="Permalink to &quot;部署warp&quot;">​</a></h3><p>参考地址：<a href="https://p3terx.com/archives/cloudflare-warp-configuration-script.html" target="_blank" rel="noreferrer">https://p3terx.com/archives/cloudflare-warp-configuration-script.html</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git.io/warp.sh)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gitlab.com/Misaka-blog/warp-script/-/raw/main/warp.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warp.sh</span></span></code></pre></div><h3 id="虚拟软路由" tabindex="-1">虚拟软路由 <a class="header-anchor" href="#虚拟软路由" aria-label="Permalink to &quot;虚拟软路由&quot;">​</a></h3><h4 id="hyper-v搭建openwrt" tabindex="-1"><a href="https://blog.yoitsu.moe/tech_misc/hyper_v_with_openwrt.html" target="_blank" rel="noreferrer">Hyper-V搭建openWrt</a> <a class="header-anchor" href="#hyper-v搭建openwrt" aria-label="Permalink to &quot;[Hyper-V搭建openWrt](https://blog.yoitsu.moe/tech\\_misc/hyper\\_v\\_with\\_openwrt.html)&quot;">​</a></h4><p><strong>准备工作 - Hyper-V 管理器、映像和创建虚拟机</strong></p><p>要使用 Hyper-V 的话，汝得有一个 Windows 8.1/10 专业版或者企业版， 或者 Windows Server 2012 以后的 Windows Server 才行。同时也要求汝的 CPU 支持必要的虚拟化技术。 （Intel VT-x 或者 AMD-V 什么的）可以通过 PowerShell 里的 systeminfo 命令确定是否可以开启 Hyper-V 。</p><p>在满足了前置要求之后，可以这样启用 Hyper-V：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果提示找不到命令的话，换以管理员身份运行的 PowerShell 窗口。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enable-WindowsOptionalFeature</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Online</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -FeatureName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Microsoft-Hyper-V</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -All</span></span></code></pre></div><p>或者用“启用或关闭 Windows 功能”也是可以的。</p><p><strong>下载和转换 OpenWrt 映像</strong></p><p>接下来到 OpenWrt 的网站上下载映像 （这时候最新的版本是 19.07，于是链接就是 <a href="https://downloads.openwrt.org/releases/19.07.7/targets/x86/64/" target="_blank" rel="noreferrer">https://downloads.openwrt.org/releases/19.07.7/targets/x86/64/</a> ）</p><p>这里咱们选择包含有内核和 rootfs 的 combined 那俩， 区别在于 squashfs 那个安装好以后系统分区像在普通路由器一样是只读的，可以实现像是升级或者复位等功能。 不过咱大概会用检查点来实现这些，那就直接用 ext4 的好了。下载和解压以后汝大概就可以得到一个像是 openwrt-19.07.7-x86-64-combined-ext4.img 这样的文件了。</p><p>但是 Hyper-V 只能用微软自己的 VHD 或者 VHDX 格式，所以还需要转换一下。 转换的方法有很多，咱这里给出咱的一个例子。</p><p>创建一个虚拟磁盘。这里用了 diskpart 命令。如果汝更偏好用磁盘管理操作的话， 可以参考 <a href="https://docs.microsoft.com/zh-cn/windows-server/storage/disk-management/manage-virtual-hard-disks" target="_blank" rel="noreferrer">这篇文章</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Microsoft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DiskPart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.0.21332.1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Copyright</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (C) Microsoft Corporation.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">On</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computer:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DESKTOP-H6MANBV</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建一个虚拟磁盘文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create vdisk file=&lt;汝要存放虚拟磁盘文件的位置&gt; maximum=&lt;它的最大大小，以 MiB 为单位&gt; type=expandable</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 假如汝有充足的硬盘空间的话，可以把上面的 type=expandable 改为 type=fixed 创建一个固定大小的虚拟磁盘。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 可以提高一些虚拟磁盘的性能。当然动态扩展对 OpenWrt 来说也够用就是了……</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DISKPART</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">est.vhd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> maximum=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8192</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type=expandable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> percent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> completed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DiskPart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> created</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtual</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 选择刚才创建的虚拟磁盘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># select vdisk file=&lt;汝要存放虚拟磁盘文件的位置&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DISKPART</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">select</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">est.vhd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DiskPart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> selected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtual</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 挂载刚才选择的虚拟磁盘。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DISKPART</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">attach</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> percent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> completed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DiskPart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> attached</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtual</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 初始化虚拟磁盘为 MBR 分区表。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OpenWrt 官方编译的版本不支持 UEFI 启动，所以就用 MBR 了。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DISKPART</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">convert</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mbr</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DiskPart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> converted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> selected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MBR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> format.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在下一步操作完成之后卸载虚拟磁盘</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DISKPART</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">detach</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DiskPart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> detached</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtual</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file.</span></span></code></pre></div><p>接下来把这个映像写入虚拟磁盘就 OK 啦。（以及咱发现 Rufus 能把虚拟磁盘识别出来）</p><h3 id="openwrt" tabindex="-1">OpenWrt <a class="header-anchor" href="#openwrt" aria-label="Permalink to &quot;OpenWrt&quot;">​</a></h3><p>个人使用的编译版本地址</p><blockquote><p><a href="https://netflixcn.com/miji/46.html" target="_blank" rel="noreferrer">https://netflixcn.com/miji/46.html</a></p></blockquote><p>密码：netflixcn.com</p><h4 id="luci插件说明" tabindex="-1">Luci插件说明 <a class="header-anchor" href="#luci插件说明" aria-label="Permalink to &quot;Luci插件说明&quot;">​</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://www.right.com.cn/forum/thread-344825-1-1.html</span></span></code></pre></div><h4 id="编译openwrt" tabindex="-1">编译openwrt <a class="header-anchor" href="#编译openwrt" aria-label="Permalink to &quot;编译openwrt&quot;">​</a></h4><p>使用github编译openwrt,可以参考该<a href="https://p3terx.com/archives/build-openwrt-with-github-actions.html" target="_blank" rel="noreferrer">教程</a>比较全面.</p><h4 id="挂载nfs" tabindex="-1">挂载nfs <a class="header-anchor" href="#挂载nfs" aria-label="Permalink to &quot;挂载nfs&quot;">​</a></h4><p>1、安装nfs支持</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kmod-fs-nfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-util</span></span></code></pre></div><p>2、创建挂载点</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span></code></pre></div><p>3、挂载nfs存储</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server_ip:/path/to/nfs/share</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/nfs</span></span></code></pre></div><p>4、自动挂载</p><p>为了在设备重启后自动挂载 NFS 存储，你可以编辑 <code>/etc/fstab</code> 文件，并添加类似以下行的条目:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server_ip:/path/to/nfs/share</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> defaults</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div><h3 id="esir云盘地址" tabindex="-1">ESir云盘地址 <a class="header-anchor" href="#esir云盘地址" aria-label="Permalink to &quot;ESir云盘地址&quot;">​</a></h3><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://drive.google.com/drive/folders/1dqNUrMf9n7i3y1aSh68U5Yf44WQ3KCuh</span></span></code></pre></div>`,80)]))}const F=a(e,[["render",h]]);export{c as __pageData,F as default};
